<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è©èªå¤§å¸«ï¼šç­†å¢¨å‚³å¥‡</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Hanzi Writer -->
    <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.5/dist/hanzi-writer.min.js"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Sans+TC:wght@400;700&family=Zhi+Mang+Xing&display=swap" rel="stylesheet">

    <style>
        html, body {
            height: 100%;
            overflow-x: hidden;
            overscroll-behavior: none; /* é˜²æ­¢ iOS æ©¡çš®ç­‹æ•ˆæœ */
        }
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #fef3c7; /* Amber-50 */
            touch-action: pan-x pan-y;
        }
        .calligraphy-font {
            font-family: 'Zhi Mang Xing', cursive;
        }
        /* ç±³å­—æ ¼èƒŒæ™¯ */
        .mizige {
            background-color: white;
            background-image: 
                linear-gradient(45deg, transparent 49.5%, #fee2e2 49.5%, #fee2e2 50.5%, transparent 50.5%),
                linear-gradient(-45deg, transparent 49.5%, #fee2e2 49.5%, #fee2e2 50.5%, transparent 50.5%),
                linear-gradient(to right, transparent 49.5%, #ef4444 49.5%, #ef4444 50.5%, transparent 50.5%),
                linear-gradient(to bottom, transparent 49.5%, #ef4444 49.5%, #ef4444 50.5%, transparent 50.5%);
            background-size: 100% 100%;
            border: 2px solid #b91c1c;
            /* é—œéµä¿®æ­£ï¼šç¢ºä¿æ ¼å­æœ¬èº«å°±ä¸å…è¨±æ²å‹• */
            touch-action: none !important; 
        }
        
        /* é›™é‡ä¿éšªï¼šå¯«å­—å€å¼·åˆ¶ç¦æ­¢ç€è¦½å™¨é»˜èªè§¸æ§è¡Œç‚º */
        .writing-canvas-container canvas, 
        .writing-canvas-container svg {
            touch-action: none !important;
        }

        @keyframes bounce-in {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); opacity: 1; }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); }
        }
        .animate-bounce-in {
            animation: bounce-in 0.5s ease-out forwards;
        }
        
        ::-webkit-scrollbar {
            width: 0px;
            background: transparent;
        }
    </style>
</head>
<body>
    <div id="root" class="h-full"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // -----------------------
        // è³‡æ–™åº« (Vocabulary Data)
        // -----------------------
        const VOCAB_LIST = [
            { id: 1, word: "é«˜è¶…", jyutping: "gou1 ciu1", meaning: "å½¢å®¹æŠ€è¡“ç‰¹åˆ¥å¥½ã€‚", english_meaning: "Superb skills.", sentence: "é€™ä½é­”è¡“å¸«çš„è®Šé­”è¡“æŠ€å·§ååˆ†____ã€‚", tip: "æ³¨æ„ã€Œé«˜ã€çš„ä¸Šä¸‹çµæ§‹ã€‚" },
            { id: 2, word: "æ ©æ ©å¦‚ç”Ÿ", jyutping: "heoi2 heoi2 jyu4 sang1", meaning: "å½¢å®¹è—è¡“ä½œå“éå¸¸é€¼çœŸã€‚", english_meaning: "Lifelike; Vivid.", sentence: "ç•«å®¶ç­†ä¸‹çš„è€è™____ã€‚", tip: "ã€Œæ ©ã€æ˜¯æœ¨å­—æ—ã€‚" },
            { id: 3, word: "è®šä¸çµ•å£", jyutping: "zaan3 bat1 zyut6 hau2", meaning: "ä¸åœåœ°ç¨±è®šã€‚", english_meaning: "Full of praise.", sentence: "å¥¶å¥¶åšçš„èœå¤ªå¥½åƒäº†ï¼Œå¤§å®¶éƒ½____ã€‚", tip: "ã€Œè®šã€å…ˆå¯«è¨€ï¼Œå†å¯«å…©å€‹å…ˆã€‚" },
            { id: 4, word: "å—é‚€", jyutping: "sau6 jiu1", meaning: "æ¥å—é‚€è«‹ã€‚", english_meaning: "Invited.", sentence: "ä»–____åƒåŠ é€™æ¬¡çš„åœ‹éš›è«–å£‡ã€‚", tip: "ã€Œé‚€ã€è£¡é¢æ˜¯ã€Œæ•«ã€ã€‚" },
            { id: 5, word: "åæšå››æµ·", jyutping: "ming4 joeng4 sei3 hoi2", meaning: "åè²å‚³éå„åœ°ã€‚", english_meaning: "World famous.", sentence: "é€™ä½é‹¼ç´å®¶å·²ç¶“____ã€‚", tip: "ã€Œæšã€æ˜¯ææ‰‹æ—ã€‚" },
            { id: 6, word: "å°‡ä¿¡å°‡ç–‘", jyutping: "zoeng1 seon3 zoeng1 ji4", meaning: "æœ‰é»ç›¸ä¿¡ï¼Œåˆæœ‰é»æ‡·ç–‘ã€‚", english_meaning: "Half believing, half doubting.", sentence: "å°æ–¼é€™å‰‡èª‡å¼µçš„æ–°èï¼Œå¤§å®¶éƒ½____ã€‚", tip: "ã€Œç–‘ã€å³é‚Šæ˜¯åŒ•ã€çŸ¢ã€èµ°ã€‚" },
            { id: 7, word: "ç°‡æ“", jyutping: "cuk1 jung2", meaning: "è¨±å¤šäººåœ˜åœ˜åœè‘—ã€‚", english_meaning: "To crowd around.", sentence: "å¤§æ˜æ˜Ÿè¢«ç²‰çµ²____è‘—ã€‚", tip: "ã€Œç°‡ã€ä¸Šç«¹ä¸‹æ—ã€‚" },
            { id: 8, word: "çƒé›²å¯†ä½ˆ", jyutping: "wu1 wan4 mat6 bou3", meaning: "é»‘é›²ä½ˆæ»¿å¤©ç©ºã€‚", english_meaning: "Dark clouds gathering.", sentence: "å¤©ç©ºä¸­____ï¼Œè¦ä¸‹é›¨äº†ã€‚", tip: "ã€Œçƒã€è£¡é¢æ²’æœ‰é»ã€‚" }
        ];

        // -----------------------
        // å–®å­—ç·´ç¿’æ ¼çµ„ä»¶ (Responsive Sizing)
        // -----------------------
        const CharacterBox = ({ char, onScoreChange, resetSignal, onComplete }) => {
            const boxRef = useRef(null);
            const writerRef = useRef(null);
            const [localScore, setLocalScore] = useState(100);
            const [status, setStatus] = useState('ready'); 
            const [boxSize, setBoxSize] = useState(150); // Default size

            useEffect(() => {
                const updateSize = () => {
                    const width = window.innerWidth;
                    if (width < 640) {
                        // æ‰‹æ©Ÿç‰ˆå„ªåŒ–ï¼š
                        // è¨ˆç®—é‚è¼¯ï¼š(è¢å¹•å¯¬åº¦ - å…©å´é–“è·) / ä¸€è¡Œæƒ³æ”¾å¹¾å€‹å­—
                        // é€™è£¡è¨­ç‚ºæ¯è¡Œå¤§ç´„ 3-4 å€‹å­—ï¼Œä¸¦é™åˆ¶æœ€å¤§æœ€å°å€¼
                        // æ¸›å» 40px æ˜¯ç‚ºäº†ç•™é‚Šè·
                        const calculatedSize = Math.floor((width - 40) / 3.5);
                        // é™åˆ¶åœ¨ 70px åˆ° 100px ä¹‹é–“ï¼Œç¢ºä¿ä¸æœƒå¤ªå°çœ‹ä¸è¦‹ï¼Œä¹Ÿä¸æœƒå¤ªå¤§å¯«ä¸äº†
                        const finalSize = Math.min(Math.max(calculatedSize, 70), 90);
                        setBoxSize(finalSize); 
                    } else {
                        setBoxSize(150);
                    }
                };

                updateSize(); 
                window.addEventListener('resize', updateSize); 
                return () => window.removeEventListener('resize', updateSize);
            }, []);

            useEffect(() => {
                if (boxRef.current && window.HanziWriter) {
                    boxRef.current.innerHTML = "";
                    setLocalScore(100);
                    setStatus('ready');

                    try {
                        writerRef.current = HanziWriter.create(boxRef.current, char, {
                            width: boxSize,  
                            height: boxSize,
                            padding: 3, // æ‰‹æ©Ÿç‰ˆ padding ç¸®å°
                            showOutline: true,
                            showCharacter: false, 
                            showHintAfterMisses: 3, 
                            strokeColor: '#1e3a8a', 
                            outlineColor: '#d1d5db', 
                            highlightColor: '#10b981', 
                        });
                        startQuiz();
                    } catch (e) {
                        console.error("HanziWriter error:", e);
                        if (onComplete) onComplete();
                    }
                }
            }, [char, resetSignal, boxSize]);

            const startQuiz = () => {
                if (!writerRef.current) return;
                setStatus('writing');
                writerRef.current.quiz({
                    onMistake: function() {
                        setLocalScore(prev => {
                            const newScore = Math.max(0, prev - 10);
                            onScoreChange(char, newScore);
                            return newScore; 
                        });
                    },
                    onComplete: function() {
                        setStatus('complete');
                        if (onComplete) onComplete();
                    }
                });
            };

            return (
                <div className="flex flex-col items-center m-1">
                    <div className="relative shadow-md group">
                        <div 
                            className="mizige relative overflow-hidden rounded-md bg-white cursor-crosshair writing-canvas-container"
                            style={{ width: `${boxSize}px`, height: `${boxSize}px` }}
                        >
                            <div ref={boxRef} className="absolute inset-0 w-full h-full flex justify-center items-center svg-container"></div>
                            {status === 'complete' && (
                                <div className="absolute inset-0 flex items-center justify-center pointer-events-none animate-bounce-in z-20">
                                    <div className="border-2 border-red-500 rounded-full flex items-center justify-center transform -rotate-12 bg-white/30 backdrop-blur-sm"
                                         style={{ width: `${boxSize * 0.7}px`, height: `${boxSize * 0.7}px` }}>
                                        <div className="text-center">
                                            <span className="block text-red-600 font-bold font-serif" style={{ fontSize: `${boxSize * 0.3}px` }}>{localScore}</span>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        // -----------------------
        // å¯«å­—ç·´ç¿’å€å¡Š
        // -----------------------
        const WordPractice = ({ wordData, onWordComplete }) => {
            const chars = wordData.word.split('');
            const [resetSignal, setResetSignal] = useState(0);
            const [scores, setScores] = useState({});
            const [completedIndices, setCompletedIndices] = useState(new Set());

            const handleScoreChangeIndexed = (index, score) => {
                setScores(prev => ({ ...prev, [index]: score }));
            };

            const handleCharComplete = (index) => {
                setCompletedIndices(prev => {
                    const newSet = new Set(prev);
                    newSet.add(index);
                    if (newSet.size === chars.length) {
                        onWordComplete(true);
                    }
                    return newSet;
                });
            };

            const calculateAverage = () => {
                const total = Object.values(scores).reduce((a, b) => a + b, 0);
                const count = chars.length;
                return count === 0 ? 0 : Math.round(total / count);
            };

            useEffect(() => {
                const initialScores = {};
                chars.forEach((_, index) => { initialScores[index] = 100; });
                setScores(initialScores);
                setCompletedIndices(new Set());
            }, [wordData]);

            return (
                <div className="flex flex-col items-center w-full">
                    {/* åˆ†æ•¸æ¢ */}
                    <div className="w-full flex justify-between items-center bg-amber-100/50 px-4 py-2 rounded-lg mb-2">
                         <span className="text-xs text-gray-500 font-bold">ç¸½åˆ†</span>
                         <span className="text-xl font-bold text-amber-700 font-mono">{calculateAverage()}</span>
                    </div>

                    {/* ç·´ç¿’æ ¼å€åŸŸ */}
                    <div className="flex flex-wrap justify-center gap-1 md:gap-2 mb-2 w-full">
                        {chars.map((char, index) => (
                            <CharacterBox 
                                key={`${wordData.id}-${index}-${char}`} 
                                char={char}
                                resetSignal={resetSignal}
                                onScoreChange={(c, s) => handleScoreChangeIndexed(index, s)}
                                onComplete={() => handleCharComplete(index)}
                            />
                        ))}
                    </div>

                    <div className="flex gap-2">
                        <button 
                            onClick={() => {
                                setResetSignal(prev => prev + 1);
                                const initialScores = {};
                                chars.forEach((_, index) => { initialScores[index] = 100; });
                                setScores(initialScores);
                                setCompletedIndices(new Set());
                                onWordComplete(false); 
                            }}
                            className="px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 text-sm font-bold transition shadow-sm"
                        >
                            é‡å¯« (Reset)
                        </button>
                    </div>
                </div>
            );
        };

        // -----------------------
        // ä¸»æ‡‰ç”¨ç¨‹å¼
        // -----------------------
        const App = () => {
            const [playerName, setPlayerName] = useState('');
            const [inputName, setInputName] = useState('');
            const [mode, setMode] = useState('menu'); 
            const [currentIndex, setCurrentIndex] = useState(0);
            const [score, setScore] = useState(0);
            const [showResult, setShowResult] = useState(false);
            const [feedback, setFeedback] = useState(null); 
            const [quizOptions, setQuizOptions] = useState([]);
            const [canProceed, setCanProceed] = useState(false);
            const [audioSpeed, setAudioSpeed] = useState(1); 
            const [isSpeaking, setIsSpeaking] = useState(false);

            const shuffleArray = (array) => [...array].sort(() => Math.random() - 0.5);

            const startStudy = () => { setMode('study'); setCurrentIndex(0); setCanProceed(false); };
            const startQuiz = () => { setMode('quiz'); setScore(0); setCurrentIndex(0); setShowResult(false); prepareQuizRound(0); };
            const handleNameSubmit = (e) => { e.preventDefault(); if (inputName.trim()) setPlayerName(inputName.trim()); };

            const prepareQuizRound = (index) => {
                if (index >= VOCAB_LIST.length) { setShowResult(true); return; }
                const correctWord = VOCAB_LIST[index];
                let options = VOCAB_LIST.filter(v => v.id !== correctWord.id);
                options = shuffleArray(options).slice(0, 3);
                options.push(correctWord);
                setQuizOptions(shuffleArray(options));
            };

            const handleQuizAnswer = (selectedWord) => {
                const currentWord = VOCAB_LIST[currentIndex];
                if (selectedWord.id === currentWord.id) {
                    setScore(score + 10);
                    setFeedback('correct');
                } else {
                    setFeedback('wrong');
                }
                setTimeout(() => {
                    setFeedback(null);
                    const nextIndex = currentIndex + 1;
                    setCurrentIndex(nextIndex);
                    prepareQuizRound(nextIndex);
                }, 1000);
            };

            const playCantonese = (text) => {
                if (!window.speechSynthesis) return;
                window.speechSynthesis.cancel();
                setIsSpeaking(true);
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'zh-HK'; 
                utterance.rate = audioSpeed; 
                const voices = window.speechSynthesis.getVoices();
                const cantoneseVoice = voices.find(v => v.lang === 'zh-HK' || v.name.includes('Cantonese'));
                if (cantoneseVoice) utterance.voice = cantoneseVoice;
                utterance.onend = () => setIsSpeaking(false);
                window.speechSynthesis.speak(utterance);
            };

            useEffect(() => { if (window.speechSynthesis) window.speechSynthesis.getVoices(); }, []);

            // 0. æ­¡è¿ç™»å…¥é 
            if (!playerName) {
                return (
                    <div className="min-h-screen flex flex-col items-center justify-center p-4 bg-amber-50">
                        <div className="bg-white p-6 rounded-2xl shadow-xl w-full max-w-sm border-2 border-amber-200">
                            <h1 className="text-4xl text-amber-900 calligraphy-font text-center mb-4">è©èªå¤§å¸«</h1>
                            <form onSubmit={handleNameSubmit} className="space-y-4">
                                <input type="text" value={inputName} onChange={(e) => setInputName(e.target.value)} placeholder="è¼¸å…¥ä½ çš„åå­—" className="w-full px-4 py-3 text-lg rounded-xl border-2 border-amber-200 focus:outline-none bg-amber-50 text-center" required />
                                <button type="submit" className="w-full bg-amber-500 text-white text-xl py-3 rounded-xl font-bold shadow-md active:scale-95">é–‹å§‹éŠæˆ²</button>
                            </form>
                        </div>
                    </div>
                );
            }

            // 1. é¸å–®ä»‹é¢
            if (mode === 'menu') {
                return (
                    <div className="min-h-screen flex flex-col items-center justify-center p-4 bg-amber-50">
                        <div className="text-center w-full max-w-md">
                            <h1 className="text-5xl text-amber-900 calligraphy-font mb-2">è©èªå¤§å¸«</h1>
                            <p className="text-xl text-amber-600 font-bold mb-8">ä½ å¥½ï¼Œ{playerName}</p>
                            <div className="space-y-4">
                                <button onClick={startStudy} className="w-full bg-emerald-500 text-white text-xl py-4 rounded-xl shadow-lg active:scale-95 font-bold flex items-center justify-center gap-2">
                                    å¯«å­—é“å ´ <span className="text-sm opacity-70">(Writing)</span>
                                </button>
                                <button onClick={startQuiz} className="w-full bg-orange-500 text-white text-xl py-4 rounded-xl shadow-lg active:scale-95 font-bold flex items-center justify-center gap-2">
                                    è©ç¾©æŒ‘æˆ° <span className="text-sm opacity-70">(Quiz)</span>
                                </button>
                            </div>
                            <button onClick={() => setPlayerName('')} className="text-sm text-amber-800/60 underline mt-8">ç™»å‡º</button>
                        </div>
                    </div>
                );
            }

            // 2. å¯«å­—ç·´ç¿’æ¨¡å¼ (iPad å„ªåŒ–ç‰ˆé¢)
            if (mode === 'study') {
                const wordData = VOCAB_LIST[currentIndex];
                return (
                    <div className="h-screen flex flex-col bg-amber-50 overflow-hidden">
                        {/* é ‚éƒ¨å°èˆª */}
                        <div className="flex justify-between items-center px-4 py-2 bg-white shadow-sm shrink-0 z-10">
                            <button onClick={() => setMode('menu')} className="text-gray-500 font-bold text-sm">
                                é€€å‡º
                            </button>
                            <span className="text-lg font-bold text-amber-800">
                                {currentIndex + 1} / {VOCAB_LIST.length}
                            </span>
                            <div className="w-8"></div>
                        </div>

                        {/* ä¸»è¦å…§å®¹å€ - å¯æ»¾å‹•ä½†éš±è—æ»¾å‹•æ¢ */}
                        <div className="flex-1 overflow-y-auto p-2 pb-24">
                            <div className="max-w-3xl mx-auto bg-white rounded-2xl shadow-lg p-3 md:p-4">
                                <div className="flex flex-col md:flex-row gap-4">
                                    {/* å·¦å´è³‡è¨Š */}
                                    <div className="w-full md:w-1/3 flex flex-col gap-2">
                                        <div className="flex items-center justify-between md:justify-start gap-3">
                                            <h2 className="text-3xl md:text-4xl font-bold text-gray-800">{wordData.word}</h2>
                                            <div className="flex gap-2">
                                                <button onClick={() => playCantonese(wordData.word)} className={`p-2 rounded-full ${isSpeaking ? 'bg-amber-400' : 'bg-amber-100'}`}>
                                                    ğŸ”Š
                                                </button>
                                                <button onClick={() => setAudioSpeed(audioSpeed === 1 ? 0.5 : 1)} className="px-2 py-1 text-xs bg-gray-100 rounded border border-gray-300">
                                                    {audioSpeed === 1 ? 'æ­£å¸¸' : 'æ…¢é€Ÿ'}
                                                </button>
                                            </div>
                                        </div>
                                        <div className="text-sm font-bold text-amber-700 bg-amber-50 px-2 py-1 rounded w-fit">ç²µ: {wordData.jyutping}</div>
                                        <div className="text-sm text-gray-600 bg-gray-50 p-2 rounded border border-gray-100">
                                            <span className="font-bold block text-xs text-gray-400 uppercase">Meaning</span>
                                            {wordData.meaning}
                                        </div>
                                        <div className="text-sm text-indigo-600 bg-indigo-50 p-2 rounded border border-indigo-100">
                                            <span className="font-bold block text-xs text-indigo-300 uppercase">English</span>
                                            {wordData.english_meaning}
                                        </div>
                                    </div>

                                    {/* å³å´å¯«å­—å€ */}
                                    <div className="w-full md:w-2/3 border-t md:border-t-0 md:border-l border-gray-100 pt-4 md:pt-0 md:pl-4">
                                        <WordPractice wordData={wordData} onWordComplete={setCanProceed} key={wordData.id} />
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* åº•éƒ¨æŒ‰éˆ•å€ (å›ºå®šåœ¨åº•éƒ¨) */}
                        <div className="shrink-0 p-3 bg-white border-t border-gray-200 flex justify-between items-center gap-4 z-20">
                            <button onClick={() => setCurrentIndex(Math.max(0, currentIndex - 1))} disabled={currentIndex === 0} className={`px-4 py-3 rounded-xl font-bold text-sm ${currentIndex === 0 ? 'bg-gray-100 text-gray-300' : 'bg-gray-200 text-gray-600'}`}>
                                ä¸Šä¸€å€‹
                            </button>
                            <button 
                                onClick={() => {
                                    if (currentIndex < VOCAB_LIST.length - 1) {
                                        setCurrentIndex(currentIndex + 1);
                                        setCanProceed(false);
                                    } else {
                                        setMode('menu');
                                    }
                                }}
                                disabled={!canProceed}
                                className={`flex-1 py-3 rounded-xl font-bold shadow-md transition text-lg flex justify-center items-center gap-2 ${canProceed ? 'bg-amber-600 text-white active:scale-95' : 'bg-gray-300 text-gray-500'}`}
                            >
                                {!canProceed && "ğŸ”’ "}
                                {currentIndex === VOCAB_LIST.length - 1 ? 'å®Œæˆç·´ç¿’' : 'ä¸‹ä¸€å€‹'}
                            </button>
                        </div>
                    </div>
                );
            }

            // 3. æ¸¬é©—æ¨¡å¼
            if (mode === 'quiz') {
                if (showResult) {
                    return (
                        <div className="min-h-screen flex flex-col items-center justify-center p-4 bg-amber-50">
                            <div className="bg-white p-8 rounded-3xl shadow-xl text-center w-full max-w-sm border-4 border-amber-200">
                                <h2 className="text-2xl font-bold text-gray-800 mb-2">æŒ‘æˆ°å®Œæˆï¼</h2>
                                <p className="text-lg text-amber-600 font-bold mb-4">{playerName}</p>
                                <div className="text-5xl font-bold text-amber-600 mb-6">{score} åˆ†</div>
                                <button onClick={() => setMode('menu')} className="w-full bg-amber-500 text-white text-xl py-3 rounded-xl font-bold shadow-lg">ä¸»é¸å–®</button>
                            </div>
                        </div>
                    );
                }

                const currentWord = VOCAB_LIST[currentIndex];
                return (
                    <div className="h-screen flex flex-col bg-amber-50">
                        <div className="flex justify-between items-center px-4 py-2 bg-white shadow-sm">
                            <span className="bg-orange-100 text-orange-800 px-2 py-1 rounded text-sm font-bold">Q {currentIndex + 1}</span>
                            <span className="font-bold text-gray-700">Score: {score}</span>
                        </div>
                        <div className="flex-1 flex flex-col items-center justify-center p-4 overflow-y-auto">
                            <div className="w-full max-w-md bg-white rounded-2xl shadow-lg p-6">
                                <h3 className="text-xl text-gray-800 leading-loose mb-4 text-center">
                                    {currentWord.sentence.split('____').map((part, i) => (
                                        <span key={i}>{part}{i === 0 && <span className="inline-block w-16 border-b-2 border-orange-400 mx-1 text-transparent">?</span>}</span>
                                    ))}
                                </h3>
                                <div className="grid grid-cols-1 gap-3">
                                    {quizOptions.map((option) => (
                                        <button key={option.id} onClick={() => !feedback && handleQuizAnswer(option)} disabled={!!feedback} className={`p-4 text-lg font-bold rounded-xl border-2 transition ${feedback ? (option.id === currentWord.id ? 'bg-green-500 border-green-500 text-white' : 'bg-gray-100 text-gray-400') : 'bg-white border-amber-200 text-gray-700 hover:border-amber-400'}`}>
                                            {option.word}
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }
            return null;
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
